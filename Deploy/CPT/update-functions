#!/bin/bash

set -ex

PROJECT="${PROJECT:-CPT}"

FUNCTIONS="${PROJECT}Authorizer
           ${PROJECT}Endpoint
           ${PROJECT}Convert
           ${PROJECT}BundlePDF
           ${PROJECT}Load
           ${PROJECT}IngestionRouter
           ${PROJECT}ProcessingRouter"

for FUNCTION in ${FUNCTIONS}; do
  aws lambda update-function-code --function-name $FUNCTION --s3-bucket ama-hsg-datalabs-lambda-code-sandbox --s3-key CPT/CPT.zip
  # aws --no-verify-ssl lambda update-function-code --function-name $FUNCTION --s3-bucket ama-hsg-datalabs-lambda-code-sandbox --s3-key CPT/CPT.zip
done || exit
